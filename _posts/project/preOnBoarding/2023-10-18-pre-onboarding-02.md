---
title: "[í”„ë¡œì íŠ¸]ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ ìˆ˜í–‰ 02 ê¸°ëŠ¥ êµ¬í˜„"
excerpt: "ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ ìˆ˜í–‰ ê³¼ì • ê¸°ë¡"
categories: [Project, Wanted-pre-onboarding]
tags: [Spring]
date: 2023-10-18
last_modified_at: 2023-10-18
render_with_liquid: false
---
# [í”„ë¦¬ì˜¨ë³´ë”© ì¸í„´ì‹­ ìˆ˜í–‰ê³¼ì œ](https://bow-hair-db3.notion.site/1850bca26fda4e0ca1410df270c03409)

í”„ë¡œì íŠ¸ëŠ” [ğŸš€ì—¬ê¸°ğŸš€](https://github.com/yeondori/wanted-pre-onboarding-backend)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì— ê´€í•´ì„œëŠ” [[í”„ë¡œì íŠ¸]ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ê³¼ì œ ìˆ˜í–‰ 03](https://yeondori.github.io/posts/pre-onboarding-03/) ì—¬ê¸°ì„œ í•œë²ˆì— ë‹¤ë£¨ê³  ìˆë‹¤!

## ê³¼ì œ ìˆ˜í–‰ ê³¼ì •

1. êµ¬ì¡° ì„¤ê³„
2. í™˜ê²½ êµ¬ì„±, H2 ë°ì´í„° ë² ì´ìŠ¤ ì—°ë™
3. ì—”í‹°í‹° ìƒì„± ë° ì´ˆê¸° ë°ì´í„° ì„¤ì •
4. Repository, Service, Controller ìƒì„±
5. ê¸°ëŠ¥ ì¶”ê°€
   - ê³µê³  ë“±ë¡
   - ê³µê³  ìƒì„¸ë³´ê¸°
   - ìƒì„¸ë³´ê¸°ì—ì„œ ì§€ì› ê¸°ëŠ¥ ì¶”ê°€
   - ê²€ìƒ‰ ê¸°ëŠ¥
   - ê³µê³  ì‚­ì œ
   - ê³µê³  ìˆ˜ì •
   - ì¡°íšŒ ê¸°ëŠ¥
   - ìƒì„¸ë³´ê¸°ì—ì„œ íšŒì‚¬ê°€ ì˜¬ë¦° ë‹¤ë¥¸ ê³µê³  ë³´ê¸°
6. Github ì—…ë¡œë“œ
7. README.md ì‘ì„±
8. ì œì¶œ ğŸ˜‚ğŸ˜‚

## 5.ê¸°ëŠ¥ ì¶”ê°€

ê¸°ëŠ¥ ì¶”ê°€ ê³¼ì •ì„ í’€ì–´ë³´ê¸°ì— ì•ì„œ ë‹¤ì‹œ í•œë²ˆ ì •ë¦¬í•˜ê³  ë„˜ì–´ê°€ìë©´ ì´ë ‡ê²Œ ì„¤ê³„í•´ë‘ì—ˆë‹¤.
![image](https://github.com/yeondori/yeondori.github.io/assets/93027942/0b3ce17b-6cef-4772-9cb1-fc45a145cfb1)

**CompanyController**ì—ì„œëŠ” ì±„ìš©ê³µê³  ë“±ë¡, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ì„ ì œê³µí•˜ë©° 
**PostController**ì—ì„œëŠ” ì±„ìš©ê³µê³  ëª©ë¡ ë°˜í™˜, ì±„ìš©ê³µê³  ìƒì„¸, ì±„ìš©ê³µê³  ê²€ìƒ‰, ì±„ìš©ê³µê³  ì§€ì› ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

ê¸°ëŠ¥ì„ ì¶”ê°€í•œ ìˆœì„œëŒ€ë¡œ ì‘ì„±í•˜ë ¤ê³  í–ˆìœ¼ë‚˜ ì‚¬ì‹¤ìƒ ìˆ˜ì •ì˜ ìˆ˜ì •ì„ ê±°ë“­í–ˆê¸° ë•Œë¬¸ì— ì € ìˆœì„œëŒ€ë¡œ ì •ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì„¤ëª…í•˜ëŠ” ê²Œ ë” í¸í•  ê²ƒ ê°™ë‹¤. 

### í™ˆ í™”ë©´

ë³„ë„ë¡œ ë§¤í•‘í•´ì£¼ì§€ ì•Šìœ¼ë©´ "/"ì´ ìš”ì²­ë  ë•Œ index.htmlì„ ë°˜í™˜í•œë‹¤.

**index.html**
```java
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì±„ìš©ê³µê³  ì„œë¹„ìŠ¤</title>
</head>
<body>
<h1>ì±„ìš©ê³µê³  ì„œë¹„ìŠ¤ í™ˆí™”ë©´</h1>

<!-- ê²€ìƒ‰ í¼ ì¶”ê°€ -->
<form action="/jobpostings/search" method="get" accept-charset="UTF-8">
    <label>
        <input type="text" name="keyword" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.">
    </label>
    <button type="submit">ê²€ìƒ‰</button>
</form>
<br>
<!-- ê¸°ì—… ë“±ë¡ ë²„íŠ¼ -->
<a href="/companies"><strong>ê¸°ì—…íšŒì›</strong></a>
<!-- ì±„ìš©ê³µê³  ëª©ë¡ ë²„íŠ¼ -->
<a href="/jobpostings"><strong>ì¼ë°˜íšŒì›</strong></a>
</body>
</html>
```

ì•„ë˜ ë¶€ë¶„ë§Œ ê°„ëµíˆ ë³´ë©´ ê²€ìƒ‰ í¼ì˜ ë²„í„´ì„ ëˆ„ë¥´ë©´ "/jobpostings/search" URIì˜ GET ë©”ì†Œë“œê°€ ìš”ì²­ë˜ê³ ,

ê¸°ì—… ë“±ë¡ ë²„íŠ¼ì€ "/companies" ë¥¼, ì±„ìš©ê³µê³  ëª©ë¡ ë²„íŠ¼ì€ "/jobpostings" ìœ¼ë¡œ ì´ë™í•œë‹¤. 

ìì„¸í•œ ê±´ ì°¨ì°¨ ë‹¤ë¤„ë³´ì!

### ê¸°ì—… ì „ìš© ê¸°ëŠ¥

ì°¸ê³ ë¡œ CompanyControllerëŠ” @RequestMapping(value = "/companies") ì–´ë…¸í…Œì´ì…˜ì´ ìˆë‹¤.
ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë£¨íŠ¸ ê²½ë¡œê°€ "/companies" ë¼ëŠ” ëœ»!

#### ê¸°ì—… í™ˆí™”ë©´, ê¸°ì—… í˜ì´ì§€

```java
//ê¸°ì—… í™ˆí™”ë©´
@GetMapping("")
public String home() {
return "companies/companiesHome";
}

 //ê¸°ì—… íšŒì› í˜ì´ì§€
 @GetMapping("/{companyId}")
 public String getJobPostingsByCompany(@PathVariable Long companyId, Model model) {
     Optional<Company> company = companyService.findById(companyId);

     if (!company.isPresent()) {
         return "Company IDê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
     }

     List<JobPosting> jobPostings = postService.findByCompanyId(company.get().getId());

     model.addAttribute("jobPostings", jobPostings);
     model.addAttribute("company", company.get());

     return "companies/postList";
 }
```

í™ˆí™”ë©´ì—ì„œëŠ” ê¸°ì—…IDë¥¼ ì…ë ¥ë°›ì•„ ê¸°ì—… íšŒì›í˜ì´ì§€ë¥¼ ë°˜í™˜í•œë‹¤. ì¸ì¦ ì ˆì°¨ê°€ ìƒëµë˜ì–´ ìˆëŠ” í”„ë¡œì íŠ¸ì´ë¯€ë¡œ ê°„ë‹¨í•˜ê²Œ êµ¬ì„±í–ˆë‹¤.

ì…ë ¥ ë°›ì€ íšŒì‚¬ì˜ IDê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë¬¸êµ¬ê°€ ì¶œë ¥ë˜ë©°, ìœ íš¨í•œ íšŒì‚¬ IDë¥¼ ì…ë ¥í•œ ê²½ìš°ì—ëŠ” í•´ë‹¹ íšŒì‚¬ì˜ ì±„ìš©ê³µê³ ë¥¼ ë¦¬ìŠ¤íŠ¸ì— ë‹´ì•„ modelì— ì¶”ê°€í•œ ë’¤ íšŒì› í˜ì´ì§€ htmlì„ ë°˜í™˜í•œë‹¤.

[ì‹¤í–‰ ì˜ˆì‹œ]
![image](https://github.com/yeondori/yeondori.github.io/assets/93027942/6933e174-874d-4940-9ca4-0f7ca2672fa9)

#### ì±„ìš©ê³µê³  ë“±ë¡

ì±„ìš©ê³µê³  ë“±ë¡ ë°©ì‹ì€ ìŠ¤í”„ë§ ì…ë¬¸ ê°•ì˜ì—ì„œ ë°°ìš´ createForm() ìœ¼ë¡œ í¼ì„ ìƒì„±í•œ ë’¤, ì •ë³´ë¥¼ ë„˜ê²¨ì£¼ëŠ” ë°©ì‹ì„ ì°¸ê³ í•˜ì—¬ êµ¬í˜„í–ˆë‹¤. 

**PostForm**
```java
public class PostForm {

    private Long companyId;
    private String jobPosition;
    private Long recruitmentCompensation;
    private String recruitmentDetails;
    private String technologyUsed;

    public Long getCompanyId() {return companyId;}
    public void setCompanyId(Long companyId) {this.companyId = companyId;}

    public String getJobPosition() {return jobPosition;}
    public void setJobPosition(String jobPosition) {this.jobPosition = jobPosition;}

    public Long getRecruitmentCompensation() {return recruitmentCompensation;}
    public void setRecruitmentCompensation(Long recruitmentCompensation) {this.recruitmentCompensation = recruitmentCompensation;}

    public String getRecruitmentDetails() {return recruitmentDetails;}
    public void setRecruitmentDetails(String recruitmentDetails) {this.recruitmentDetails = recruitmentDetails;}

    public String getTechnologyUsed() {return technologyUsed;}
    public void setTechnologyUsed(String technologyUsed) {this.technologyUsed = technologyUsed;}
}
```
íšŒì‚¬ID, ì±„ìš©í¬ì§€ì…˜, ì±„ìš©ë³´ìƒê¸ˆ ë“± ì±„ìš©ê³µê³ ì— í•„ìš”í•œ í•„ë“œë“¤ì„ ì •ì˜í•´ì£¼ì—ˆê³  getter, setterë¥¼ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.

**CompanyController**

```java
 //ì±„ìš©ê³µê³  ë“±ë¡ í¼
 @GetMapping("/{id}/new")
 public String showJobPostingForm(@PathVariable Long id, Model model) {
     model.addAttribute("companyId", id);
     return "companies/createdPostForm"; 
 }

 //ì±„ìš©ê³µê³  ë“±ë¡
 @PostMapping("/{id}/new")
 public String create(PostForm form) {
     Company company = companyService.findById(form.getCompanyId()).orElse(null);

     if (company == null) {
         return "Company IDê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
     }
     Long companyId = form.getCompanyId();

     JobPosting newPost = new JobPosting();

     newPost.setCompany(company);
     newPost.setJobPosition(form.getJobPosition());
     newPost.setRecruitmentDetails(form.getRecruitmentDetails());
     newPost.setTechnologyUsed(form.getTechnologyUsed());
     newPost.setRecruitmentCompensation(form.getRecruitmentCompensation());

     postService.save(newPost);

     return "redirect:/companies/" + companyId;
 }
```

1. "/companies/{id}/new" GET -> CompanyIDë¥¼ ëª¨ë¸ì— ë„˜ê²¨ì¤€ í›„ template ë””ë ‰í† ë¦¬ ë‚´ë¶€ì— ìˆëŠ” companies/createdPostForm.html í˜¸ì¶œ

2. createdPost.htmlì—ì„œ í•´ë‹¹ í•„ë“œë“¤ì„ ì…ë ¥ë°›ì€ ë’¤ ê°™ì€ URIë¡œ POST ìš”ì²­

3. "/companies/{id}/new" Post -> htmlì—ì„œ ì‘ì„±í•œ PostForm ê°ì²´ë¥¼ ë°›ì•„ì˜¨ë‹¤.

4. Company IDë¥¼ ê²€ì¦í•˜ê³ (ì´ ë¶€ë¶„ì€ ë“±ë¡ URIê°€ "/companies/new"ì¼ ë•Œ ì‘ì„±ëœ ë¶€ë¶„ì¸ë° í˜„ì¬ëŠ” ë¶ˆí•„ìš”í•  ê²ƒ ê°™ë‹¤), ìƒˆë¡œìš´ JobPosting ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.

5. ìƒˆë¡œìš´ JobPosting ê°ì²´ì— formì˜ ë‚´ìš©ì„ ì£¼ì…í•œ ë’¤ ì €ì¥í•œë‹¤. 

6. íšŒì‚¬ì˜ í˜ì´ì§€(í•´ë‹¹ íšŒì‚¬ê°€ ì˜¬ë¦° ì±„ìš©ê³µê³  ëª©ë¡)ë¥¼ ë°˜í™˜í•œë‹¤.

[ì‹¤í–‰ ì˜ˆì‹œ]
![image](https://github.com/yeondori/yeondori.github.io/assets/93027942/4d31298d-1198-403c-8cc8-ffe1de65fa0b)

#### ì±„ìš©ê³µê³  ì‚­ì œ

**postList.html** 
```html
<form th:action="@{'/companies/deleteJobPosting/' + ${jobPosting.id}}" method="post">
<input type="hidden" name="_method" value="delete" />
<button type="submit" onclick="return confirm('ì •ë§ë¡œ ì´ ì‘ì—…ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</button>
</form>
```
ê¸°ì—… í˜ì´ì§€ì˜ ì‚­ì œë²„íŠ¼ì„ ì‚´í´ë³´ë©´, ì‚­ì œ ë²„íŠ¼ì„ ëˆ„ë¥¼ ê²½ìš° "/companies/deleteJobPostings/{ì±„ìš©ê³µê³ Id}"ì— POST ë©”ì†Œë“œë¡œ ìš”ì²­ì´ ë˜ëŠ” ê²ƒ ê°™ì§€ë§Œ hidden íƒ€ì…ìœ¼ë¡œ DELETE ìš”ì²­ì´ ì „ì†¡ëœë‹¤.

**CompanyController**
```java
//ì±„ìš©ê³µê³  ì‚­ì œ
@DeleteMapping("/deleteJobPosting/{postId}")
public String deleteJobPosting(@PathVariable Long postId) {
    Long companyId = postService.findCompanyIdById(postId);
    postService.deleteById(postId);
return "redirect:/companies/" + companyId;
}
```

findCompanyIdByIdëŠ” ì±„ìš©ê³µê³ ì˜ Idë¡œ í•´ë‹¹ ì±„ìš©ê³µê³ ì˜ Company Idë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì†Œë“œë¡œ, PostServiceì— ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„í•´ ë‘ì—ˆë‹¤.
ë ˆí¬ì§€í† ë¦¬ì— ì •ì˜ë˜ì§€ ì•Šì•˜ëŠ”ë° ê´œì°®ì€ê°€... í•˜ëŠ” ì˜ë¬¸ 

**PostService**
```java
public Long findCompanyIdById(Long id) {
Optional<JobPosting> jobPosting = findById(id);
if (!jobPosting.isPresent()) {
throw new EntityNotFoundException("Job Posting not found for id: " + id);
}
return jobPosting.get().getCompany().getId();
}
```

ì‚­ì œ í›„ì—ëŠ” ê¸°ì—… í˜ì´ì§€ë¥¼ ë°˜í™˜í•œë‹¤.

[ì‹¤í–‰ ì˜ˆì‹œ]
![image](https://github.com/yeondori/yeondori.github.io/assets/93027942/2e4182bd-653d-4afa-a2c3-4b780b87950e)

#### ì±„ìš©ê³µê³  ìˆ˜ì •

**postList.html**
```html
<form th:action="@{'/companies/editJobPosting/' + ${jobPosting.id}}" method="get">
   <button type="submit">ìˆ˜ì •</button>
</form>
```
ìˆ˜ì • ë²„íŠ¼ ë˜í•œ ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ "/companies/editJobPosting/{ì±„ìš©ê³µê³ Id}" ì— GET ìš”ì²­ì„ ë³´ë‚¸ë‹¤.

**CompanyController**
```java
//ì±„ìš©ê³µê³  ìˆ˜ì •
@GetMapping("/editJobPosting/{jobPostingId}")
public String getEditJobPostingForm(@PathVariable Long jobPostingId, Model model) {
    Optional<JobPosting> jobPosting = postService.findById(jobPostingId);

      if (!jobPosting.isPresent()) {
         return "ì±„ìš© ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
      }
      
      model.addAttribute("jobPosting", jobPosting.get());
      
      return "companies/editJobPosting";
}
```
ìš”ì²­ì„ ë°›ì€ getEditJobPostingForm ë©”ì†Œë“œëŠ” í•´ë‹¹ ì±„ìš©ê³µê³ ë¥¼ ì°¾ì•„ ëª¨ë¸ì— ì¶”ê°€í•œ ë’¤ ìˆ˜ì • í˜ì´ì§€ë¥¼ ë°˜í™˜í•œë‹¤.

**editJobPosting.html**
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
   <meta charset="UTF-8">
   <title>ì±„ìš©ê³µê³  ìˆ˜ì •</title>
</head>
<body>
<h1>ì±„ìš©ê³µê³  ìˆ˜ì •</h1>

<form th:action="@{'/companies/updateJobPosting/' + ${jobPosting.id}}" method="post">
   <input type="hidden" name="id" th:value="${jobPosting.id}" />

   <label for="jobPosition">ì±„ìš© í¬ì§€ì…˜:</label>
   <input type="text" id="jobPosition" name="jobPosition" th:value="${jobPosting.jobPosition}" />
   <br />

   <label for="recruitmentCompensation">ì±„ìš© ë³´ìƒê¸ˆ:</label>
   <input type="text" id="recruitmentCompensation" name="recruitmentCompensation" th:value="${jobPosting.recruitmentCompensation}" />
   <br />

   <label for="recruitmentDetails" style="vertical-align: top;">ì±„ìš© ë‚´ìš©:</label>
   <textarea id="recruitmentDetails" name="recruitmentDetails" rows="5" cols="50">
    [[${jobPosting.recruitmentDetails}]]</textarea>
   <br />

   <label for="technologyUsed">ì‚¬ìš© ê¸°ìˆ :</label>
   <input type="text" id="technologyUsed" name="technologyUsed" th:value="${jobPosting.technologyUsed}" />
   <br />

   <button type="submit">ìˆ˜ì •</button>
</form>

</body>
</html>
```
ìˆ˜ì • í˜ì´ì§€ì˜ htmlì„ ìì„¸íˆ ë³¼ í•„ìš”ëŠ” ì—†ê³  

`<form th:action="@{'/companies/updateJobPosting/' + ${jobPosting.id}}" method="post">` 

ì—¬ê¸¸ ì‚´í´ë³´ë©´ ì±„ìš©ê³µê³  ìˆ˜ì •í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ thymeleaf ì„ ìƒë‹˜ê»˜ì„œ ìˆ˜ì •í•œ ì •ë³´ë“¤ì„ ê°€ì§€ê³   "/companies/updateJobPosting/{ì±„ìš©ê³µê³ Id}"ì— POST ë©”ì†Œë“œë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.

**CompanyController**
```java
 //ì±„ìš©ê³µê³  ìˆ˜ì •ê²°ê³¼ ì—…ë°ì´íŠ¸
 @PostMapping("/updateJobPosting/{jobPostingId}")
 public String updateJobPosting(@PathVariable Long jobPostingId, @ModelAttribute JobPosting updatedJobPosting) {
     postService.updatePost(updatedJobPosting);
     Long companyId = updatedJobPosting.getCompany().getId();
     return "redirect:/companies/" + companyId;
 }
```

ê·¸ëŸ¬ë©´ ë‹¤ì‹œ ì´ ìš”ì²­ì„ ë§¤í•‘í•œ updateJobPostingê°€ updateë¥¼ ìˆ˜í–‰í•˜ê³  ê¸°ì—… í˜ì´ì§€ë¥¼ ë°˜í™˜í•˜ê²Œ ëœë‹¤.

ì°¸ê³ ë¡œ PostServiceì˜ updatePostëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

**PostService**
```java
public JobPosting updatePost(JobPosting updatedJobPosting) {

     Optional<JobPosting> targetJobPosting = postRepository.findById(updatedJobPosting.getId());

     if (targetJobPosting.isPresent()) {
         Company company = targetJobPosting.get().getCompany();
         updatedJobPosting.setCompany(company);
     }
     return postRepository.save(updatedJobPosting);
}
```
++ ì‘ì„± ì¤‘ì— ë°œê²¬í•œ ì˜¤ë¥˜ updatePost voidë„¤...?

```java
public void updatePost(JobPosting updatedJobPosting) {

        Optional<JobPosting> targetJobPosting = postRepository.findById(updatedJobPosting.getId());

        if (targetJobPosting.isPresent()) {
            Company company = targetJobPosting.get().getCompany();
            updatedJobPosting.setCompany(company);
        }
        postRepository.save(updatedJobPosting);
    }
```

ë„˜ê²¨ë°›ì€ jobPostingì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œ í›„ì— ì¡´ì¬í•œë‹¤ë©´ Company ì •ë³´ë¥¼ ë°›ì•„ì™€ì•¼ í•œë‹¤. 
updatJobPositngì—ëŠ” íšŒì‚¬ ì •ë³´ê°€ ì—†ê¸° ë•Œë¬¸ì— ì´ ì‘ì—…ì„ í•´ì£¼ì§€ ì•Šìœ¼ë©´ Company ë¶€ë¶„ì´ nullì´ ëœë‹¤.

ì •ë¦¬í•˜ë©´ 
1. ìˆ˜ì • ë²„íŠ¼ì„ í´ë¦­ -> "/companies/editJobPosting/{ì±„ìš©ê³µê³ Id}" GET 

2. ì»¨íŠ¸ë¡¤ëŸ¬ì˜ getEditJobPostingFormì—ì„œ ì±„ìš© ê³µê³ ë¥¼ ëª¨ë¸ì— ë‹´ì•„ ìˆ˜ì • í˜ì´ì§€ ë°˜í™˜

3. ìˆ˜ì • í˜ì´ì§€ì—ì„œ ìˆ˜ì •í•œ ì •ë³´ë“¤ì„ ë‹´ì•„ "/companies/updateJobPosting/{ì±„ìš©ê³µê³ Id}" POST 

4. ì»¨íŠ¸ë¡¤ëŸ¬ì˜ updateJobPostingì—ì„œ update ìˆ˜í–‰ í›„ ê¸°ì—… í˜ì´ì§€ ë°˜í™˜

[ì‹¤í–‰ ì˜ˆì‹œ]
![image](https://github.com/yeondori/yeondori.github.io/assets/93027942/8f88aabd-a573-4dcb-bfdf-25810d7b4e46)
(ì°¸ê³ ë¡œ ì˜ˆì‹œì—ì„œ ìˆ˜ì •í™”ë©´ì€ ìˆ˜ì • ì „ í™”ë©´ì´ë‹¤)

### ì‚¬ìš©ì ê¸°ëŠ¥

ì‚¬ìš©ì ê¸°ëŠ¥ì´ë¼ëŠ” ëª…ëª…ì´ ì ì ˆí•œ ì§€ëŠ” ëª¨ë¥´ê³˜ìœ¼ë‚˜ í˜„ì¬ êµ¬í˜„ëœ í”„ë¡œì íŠ¸ ìˆ˜ì¤€ì—ì„œëŠ” íšŒì› ì „ìš© ê¸°ëŠ¥ì´ ë³„ë„ë¡œ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì±„ìš©ê³µê³  ëª©ë¡, ìƒì„¸ë³´ê¸°, ì§€ì› ë“±ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‚¬ìš©ì ê¸°ëŠ¥ìœ¼ë¡œ ëª…ëª…í•˜ê² ë‹¤.

ì°¸ê³ ë¡œ ëª¨ë“  ê¸°ëŠ¥ì€ PostControllerì—ì„œ ì‘ë™í•˜ëŠ”ë° ì»¨íŠ¸ë¡¤ëŸ¬ì—ëŠ” @RequestMapping(value = "/jobpostings") ì–´ë…¸í…Œì´ì…˜ì´ ìˆë‹¤.

#### ì±„ìš©ê³µê³  ëª©ë¡ 

**PostController**
```java
//ì±„ìš© ê³µê³  ëª©ë¡
@GetMapping("")
public String retrieveAllPosts(Model model){
        List<JobPosting> jobPostings=postService.findAll();
        List<JobPostingDTO> jobPostingDTOS=mapToJobPostingDTOList(jobPostings);
        model.addAttribute("jobPostingDTOs",jobPostingDTOS);
        return"jobpostings/home";
}

private List<JobPostingDTO> mapToJobPostingDTOList(List<JobPosting> jobPostings) {
   List<JobPostingDTO> jobPostingDTOs = new ArrayList<>();
   
   for (JobPosting jobPosting : jobPostings) {
      JobPostingDTO dto = new JobPostingDTO();
      dto.setId(jobPosting.getId());
      dto.setCompanyName(jobPosting.getCompany().getName());
      dto.setCompanyCountry(jobPosting.getCompany().getCountry());
      dto.setCompanyRegion(jobPosting.getCompany().getRegion());
      dto.setJobPosition(jobPosting.getJobPosition());
      dto.setRecruitmentCompensation(jobPosting.getRecruitmentCompensation());
      dto.setTechnologyUsed(jobPosting.getTechnologyUsed());
   
      jobPostingDTOs.add(dto);
   }
   
   return jobPostingDTOs;
}
```

"/jobpostings" ìš”ì²­ì„ ë°›ìœ¼ë©´ ëª¨ë“  ì±„ìš©ê³µê³  ëª©ë¡ì„ ë°˜í™˜í•œë‹¤. ì´ë•Œ Companyì™€ JobPosting ì—”í‹°í‹°ëŠ” ì„œë¡œë¥¼ ì°¸ì¡°í•˜ëŠ” ì–‘ë°©í–¥ ì—°ê²°ê´€ê³„ì´ë¯€ë¡œ 
ìˆœí™˜ ì°¸ì¡° ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ë°, ì´ë•Œ JsonIgnore ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ë°˜í™˜í•˜ì§€ ì•Šë„ë¡ í•´ì£¼ì—ˆë‹¤. 

ë¬¸ì œëŠ” ì±„ìš© ë‚´ìš©ì´ë¼ëŠ” ì»¬ëŸ¼ì€ ìƒì„¸ë³´ê¸°ë¥¼ ëˆ„ë¥¸ ê²½ìš°ì—ë§Œ ë³´ì—¬ì•¼ í•˜ë¯€ë¡œ DTO í´ë˜ìŠ¤ë¥¼ ë³„ë„ë¡œ ìƒì„±í•´ì£¼ì—ˆë‹¤. 

**JobPostingDTO**
```java
public class JobPostingDTO {
private Long id;
private String companyName;
private String companyCountry;
private String companyRegion;
private String jobPosition;
private Long recruitmentCompensation;
private String technologyUsed;

    //getter, setter ìƒëµ
}
```
ìš”êµ¬ì‚¬í•­ì—ì„œ ëª…ì‹œëœ í•­ëª©ë“¤ë§Œ ë‹´ê²¨ì ¸ ìˆë‹¤.

mapToJobPostingDTOList ë©”ì†Œë“œì—ì„œ JobPostings ë¦¬ìŠ¤íŠ¸ë¥¼ JobPostingDTO ë¦¬ìŠ¤íŠ¸ë¡œ ë§¤í•‘í•´ì¤€ë‹¤.

ë§¤í•‘ í›„ ëª¨ë¸ì— DTO ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹´ì•„ jobpostings/home.html ì— ë°˜í™˜í•œë‹¤.

[ì‹¤í–‰ ì˜ˆì‹œ]
![image](https://github.com/yeondori/yeondori.github.io/assets/93027942/67cb3715-2bf0-485f-83bb-9d1d2b5ada8d)


#### ì±„ìš©ê³µê³  ìƒì„¸ë³´ê¸° 


**PostController**
```java
 // ì±„ìš©ê³µê³  ìƒì„¸
 @GetMapping("/{id}")
 public String retrieveDetails(@PathVariable Long id, Model model) {
     Optional<JobPosting> selectedPost = postService.findById(id);
     if (!selectedPost.isPresent()) {
         throw new UserNotFoundException(String.format("ID[%s] is not found", id));
     }
     model.addAttribute("jobPosting", selectedPost.get());

     List<Long> jobPostingIdList = selectedPost.get().getCompany().getJobPostingIdList();
     jobPostingIdList.remove(id); // í˜„ì¬ ì±„ìš©ê³µê³  IDë¥¼ ì‚­ì œ

     if (jobPostingIdList.isEmpty()) {
         model.addAttribute("anotherPosts", "None");
     } else {
         model.addAttribute("anotherPosts", jobPostingIdList);
     }

     return "jobpostings/postDetails";
 }
```

ìƒì„¸ë³´ê¸° í´ë¦­ ì‹œì—ëŠ” ì±„ìš© ë‚´ìš©ê³¼ í•´ë‹¹ ê³µê³ ë¥¼ ì˜¬ë¦° íšŒì‚¬ì˜ ë‹¤ë¥¸ ê³µê³ ê°€ ì¶œë ¥ë˜ì–´ì•¼ í•œë‹¤.

ì´ë•ŒëŠ” DTOê°€ ì•„ë‹Œ JobPosting ê°ì²´ë¥¼ ëª¨ë¸ì— ë‹´ì•„ì£¼ë©°, íšŒì‚¬ì˜ ë‹¤ë¥¸ ê³µê³ ëŠ” ë³„ë„ì˜ ì‘ì—…ì„ ê±°ì¹œë‹¤.

í•´ë‹¹ í¬ìŠ¤íŠ¸ì—ì„œ íšŒì‚¬ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ ë’¤ getJobPostingIdList() ë©”ì†Œë“œë¡œ íšŒì‚¬ì˜ ê³µê³ ë“¤ì„ ê°€ì ¸ì˜¤ëŠ”ë°, í•´ë‹¹ ë©”ì†Œë“œëŠ” Company í´ë˜ìŠ¤ì— ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„ë˜ì–´ ìˆë‹¤.

**Company**
```java
public List<Long> getJobPostingIdList() {
   List<Long> idList = new ArrayList<>();
   for (JobPosting jobPosting : jobPostingList) {
   idList.add(jobPosting.getId());
   }
return idList;
}
```

Companyì˜ jobPostingListì—ì„œ idë¥¼ ê°€ì ¸ì™€ id ë¦¬ìŠ¤íŠ¸ì— add í•œ ë’¤, id ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.

ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ê°€ì ¸ì˜¨ id ë¦¬ìŠ¤íŠ¸ì—ì„œ í˜„ì¬ ì±„ìš©ê³µê³ ì˜ idëŠ” ì œê±°í•œ ë’¤ì— ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆë‹¤ë©´ "None"ì„, ë¹„ì–´ìˆì§€ ì•Šë‹¤ë©´ ë¦¬ìŠ¤íŠ¸ë¥¼ ëª¨ë¸ì— ë‹´ì•„ ìƒì„¸í˜ì´ì§€ë¡œ ë°˜í™˜í•œë‹¤. 

**postDetails.html**
```html
<h3 th:utext="'<strong>ì±„ìš©ë‚´ìš©:</strong> ' + ${jobPosting.recruitmentDetails}"></h3>
<h3><strong>ë‹¤ë¥¸ ê³µê³ :</strong></h3>
  <!-- anotherPostsê°€ "None"ì¸ ê²½ìš°ì— ë©”ì‹œì§€ í‘œì‹œ -->
  <h3 th:if="${anotherPosts == 'None'}"> ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</h3>
  <!-- anotherPostsê°€ "None"ì´ ì•„ë‹Œ ê²½ìš°ì—ëŠ” í•˜ì´í¼ë§í¬ ëª©ë¡ í‘œì‹œ -->
  <ul th:unless="${anotherPosts == 'None'}">
    <!-- "ë‹¤ë¥¸ ê³µê³ :" ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ ë³€ê²½ -->
    <li th:each="postId : ${anotherPosts}">
      <a th:href="@{'/jobpostings/' + ${postId}}">ê²Œì‹œë¬¼ ID: <span th:text="${postId}"></span></a>
    </li>
  </ul>
```

ì²«ì¤„ì— ì±„ìš©ë‚´ìš©ê³¼, ë‘˜ì§¸ì¤„ ì´í•˜ì˜ ë‹¤ë¥¸ ê³µê³ ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. anotherPostê°€ "None"ì¸ ê²½ìš°ì—ëŠ” ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ê³ , anotherPostê°€ ë¦¬ìŠ¤íŠ¸ í˜•ì‹ì¸ ê²½ìš° í•˜ë‚˜ì”© ì¶œë ¥í•œë‹¤.

ì°¸ê³ ë¡œ ì´ë–„ëŠ” "postId: {ì±„ìš©ê³µê³  Id}" ì— ìƒì„¸ í˜ì´ì§€ë¡œ ê°ˆ ìˆ˜ ìˆëŠ” URI("/jobpostings/{ì±„ìš©ê³µê³  Id}")ê°€ í•˜ì´í¼ë§í¬ë¡œ ê±¸ë ¤ìˆë‹¤. 

í˜ì´ì§€ í•˜ë‹¨ì—ëŠ” ì§€ì›í•˜ê¸° ë²„íŠ¼ë„ ìˆëŠ”ë° ì´ê±´ ì•„ë˜ì—ì„œ ì„¤ëª…í•˜ê³˜ë‹¤.

[ì‹¤í–‰ ì˜ˆì‹œ]
![image](https://github.com/yeondori/yeondori.github.io/assets/93027942/ff97d71c-46ad-4b17-a8ba-ea7a03e3dc1b)

#### ì±„ìš©ê³µê³  ì§€ì›

**postDetails.html**
```html
<div class="apply-form">
  <h4>í•´ë‹¹ ê³µê³ ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹ ê°€ìš”?</h4>
  <form th:action="@{'/jobpostings/' + ${jobPosting.id} + '/apply'}" method="post" onsubmit="return confirm('í•´ë‹¹ ê³µê³ ì— ì§€ì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì§€ì›ì€ 1íšŒë§Œ ê°€ëŠ¥í•˜ë©° ì² íšŒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')">
    <label for="memberId"></label>
    <input type="text" id="memberId" name="memberId" required placeholder="ì§€ì›ì IDë¥¼ ì…ë ¥í•˜ì„¸ìš”"/>
    <button type="submit">ì§€ì›í•˜ê¸°</button>
  </form>
</div>
```

ë°©ê¸ˆ ì „ì— ì–¸ê¸‰í•œ ì§€ì›í•˜ê¸° ë²„íŠ¼ì´ ë°”ë¡œ ì´ê±°ë‹¤. ì§€ì› ì‹œì—ëŠ” "/jobpostings/{ì±„ìš©ê³µê³  Id}/apply" ë¼ëŠ” URIì— POSTë¡œ ì „ì†¡í•˜ëŠ”ë°, ì´ë•Œ memberIdë¥¼ ê°™ì´ ë„˜ê²¨ì¤€ë‹¤.


**PostController**
```java
// ì±„ìš©ê³µê³  ì§€ì›
public static final int SUCCESS = 1;
public static final int MEMBER_NOT_FOUND = 2;
public static final int POST_NOT_FOUND = 3;
public static final int ALREADY_APPLIED = 4;

    @PostMapping("/{id}/apply")
    public String applyForJob(@PathVariable Long id, @RequestParam String memberId, Model model) {
        Long applicantId = Long.parseLong(memberId);
        Map<String, Object> response = new HashMap<>();
        int status = SUCCESS;

        if (memberService.findById(applicantId).isEmpty()) {
            status = MEMBER_NOT_FOUND;
        } else {
            Optional<JobPosting> selectedPost = postService.findById(id);
            if (!selectedPost.isPresent()) {
                status = POST_NOT_FOUND;
            } else {
                JobPosting jobPosting = selectedPost.get();
                Member applicant = memberService.findById(applicantId).get();
                if (applicant.getAppliedPosting() != null) {
                    status = ALREADY_APPLIED;
                } else {
                    applicant.setAppliedPosting(jobPosting);
                    memberService.save(applicant);
                    postService.save(jobPosting);
                }
            }
        }
        model.addAttribute("jobPostingId", id);
        model.addAttribute("applicantId", applicantId);
        model.addAttribute("applyStatus", status);
        return "jobpostings/applyResult";
    }
```

ì—¬ê¸°ì„œ idëŠ” ì±„ìš©ê³µê³  idë¥¼ ì˜ë¯¸í•˜ë©°, URIì—ì„œ @PathVariableë¡œ ê°€ì ¸ì˜¨ë‹¤. ì§€ì›í•˜ê¸° ë²„íŠ¼ì—ì„œ ë„˜ê²¨ë°›ì€ memberIdëŠ” Stringì˜ í˜•íƒœë¡œ @RequestParamì—ì„œ ë°›ì•„ì˜¨ë‹¤.
ì§€ì› ìƒíƒœì½”ë“œë¥¼ ëª…ëª…í•´ ì£¼ì—ˆê³ , ì§€ì›ìëŠ” í•˜ë‚˜ì˜ ê³µê³ ì— 1íšŒ ì§€ì›ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ ê²½ìš°ëŠ” ì´ ë„¤ ê°€ì§€ì´ë‹¤.

1. ì§€ì› ì´ë ¥ì´ ì—†ëŠ” ì‚¬ìš©ìê°€ ì§€ì›í•œ ê²½ìš°(ì„±ê³µ)
2. ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°(ì‹¤íŒ¨)
3. ì±„ìš©ê³µê³ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°(ì‹¤íŒ¨)
4. ì§€ì› ì´ë ¥ì´ ìˆëŠ” ì‚¬ìš©ìê°€ ì§€ì›í•œ ê²½ìš°(ì‹¤íŒ¨)

ì´ëŸ¬í•œ ìƒíƒœë¥¼ statusì— ë‹´ì•„ ëª¨ë¸ì— ì¶”ê°€í•´ì£¼ì—ˆê³ , ì‘ì—…ì— í•„ìš”í•œ ì§€ì›ì Idì™€ ì±„ìš©ê³µê³  Idê¹Œì§€ ëª¨ë¸ì— ì¶”ê°€í•˜ì—¬ "jobpostings/applyResult"ë¥¼ ë°˜í™˜í•œë‹¤.

++ response ë¶€ë¶„ì€ ì´ˆê¸° ì½”ë“œì´ë©° ì´ˆê¸°ì—ëŠ” ìœ„ì˜ ë©”ì†Œë“œì—ì„œ ë©”ì‹œì§€ë¥¼ ë°”ë¡œ ë°˜í™˜í•´ì£¼ì—ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ë¥¼ Htmlì—ì„œ ë‹¤ë£¨ê³  ì‹¶ì–´ì„œ í˜„ì¬ì˜ ì½”ë“œë¡œ ìˆ˜ì •í–ˆê³ , ë¶ˆí•„ìš”í•œ ë¶€ë¶„ì´ë¼ ì‚­ì œí•´ ì£¼ì—ˆë‹¤.

**applyResult.html**
```html
<!-- applyResult.html -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ì§€ì› ê²°ê³¼</title>
</head>
<body>
<h1> ì§€ì› ê²°ê³¼</h1>
<div id="resultMessage">
    <h3 th:if="${applyStatus == 2}">ì¡´ì¬í•˜ëŠ” íšŒì›ì´ ì•„ë‹™ë‹ˆë‹¤.</h3>
    <h3 th:if="${applyStatus == 3}">ì±„ìš©ê³µê³ ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</h3>
    <h3 th:if="${applyStatus == 4}">ì´ë¯¸ ì±„ìš©ê³µê³ ì— ì§€ì›í•˜ì—¬, ì§€ì›ì´ ë¶ˆê°€í•©ë‹ˆë‹¤.</h3>
</div>

<!-- ê³µê³  ë° ì§€ì›ì ID ì¶œë ¥ -->
<div th:if="${applyStatus == 1}">
    <h3>ì§€ì›ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì§€ì›í•˜ì‹  ë‚´ì—­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</h3>
    <table style="border: 2px solid #ddd; background-color: #f5f5f5; padding: 10px;">
        <tr>
            <td style="font-weight: bold;">ì±„ìš©ê³µê³  ID:</td>
            <td><span th:text="${id}"></span></td>
        </tr>
        <tr>
            <td style="font-weight: bold;">ì§€ì›ì ID:</td>
            <td><span th:text="${applicantId}"></span></td>
        </tr>
    </table><br>
</div>

<!-- ì±„ìš©ëª©ë¡ ë‘˜ëŸ¬ë³´ê¸° ë° ì±„ìš©ê³µê³ ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼ ì¶”ê°€ -->
<div class="job-details">
    <a th:href="@{'/jobpostings/' + ${id}}">ì±„ìš©ê³µê³ ë¡œ ëŒì•„ê°€ê¸°</a><br>
    <a th:href="@{/jobpostings}">ì±„ìš©ëª©ë¡ ë‘˜ëŸ¬ë³´ê¸°</a>
</div>
</body>
</html>
```

ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì§€ì› ê²°ê³¼ í¼ì„ ìƒì„±í•´ì£¼ì—ˆë‹¤.

[ì‹¤í–‰ ì˜ˆì‹œ]
![image](https://github.com/yeondori/yeondori.github.io/assets/93027942/db3f6b23-1a51-4224-a6bf-691bd964da1d)
![image](https://github.com/yeondori/yeondori.github.io/assets/93027942/ba5201dd-af30-4894-bf44-1c894907f878)

#### ì±„ìš©ê³µê³  ê²€ìƒ‰

í™ˆ í™”ë©´ì— ê²€ìƒ‰ í¼ì„ í†µí•´ ê²€ìƒ‰ì´ ê°€ëŠ¥í•˜ë„ë¡ ê²€ìƒ‰ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆë‹¤. 

**index.html**
```java
<form action="/jobpostings/search" method="get" accept-charset="UTF-8">
    <label>
        <input type="text" name="keyword" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.">
    </label>
    <button type="submit">ê²€ìƒ‰</button>
</form>
```
ì°¸ê³ ë¡œ í™ˆ í™”ë©´ì˜ ì´ ë¶€ë¶„ì´ ê²€ìƒ‰ í¼ì´ê³ , ì…ë ¥ë°›ì€ í‚¤ì›Œë“œë¥¼ ê°€ì§€ê³  "/jobpostings/search"ì— GET ìš”ì²­ì„ ì „ì†¡í•œë‹¤.

**PostController**
```java
// ì±„ìš©ê³µê³  ê²€ìƒ‰
@GetMapping("/search")
public String searchJobPostings(@RequestParam("keyword") String keyword, Model model) {
   if (keyword.isEmpty()) {
       return "redirect:/jobpostings";
   } else {
   List<JobPosting> searchResults = postService.findBySearchKeyword(keyword);
   model.addAttribute("keyword", keyword);
   
      if (searchResults.isEmpty()) {
          return "jobpostings/noResults"; // ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ëŠ” ê²½ìš°ì— ëŒ€í•œ ë·°
      } else {
          List<JobPostingDTO> searchResultsDTO = mapToJobPostingDTOList(searchResults);
          model.addAttribute("searchResults", searchResultsDTO);

          return "jobpostings/searchResults"; // ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆëŠ” ê²½ìš°ì— ëŒ€í•œ ë·°
      }
  }
}
```
í•´ë‹¹ URIì™€ ë§¤í•‘ëœ searchJobPostingsê°€ RequestParamì„ í†µí•´ keywordë¥¼ ë°›ì•„ì˜¤ê³ , ì„¸ ê°€ì§€ ê²½ìš°ë¡œ ë‚˜ëˆ  ì²˜ë¦¬ëœë‹¤.

1. í‚¤ì›Œë“œê°€ ë¹„ì–´ ìˆëŠ” ê²½ìš° -> ì±„ìš©ê³µê³  ëª©ë¡ ë°˜í™˜
2. í‚¤ì›Œë“œë¡œ ê²€ìƒ‰ ì‹œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ëŠ” ê²½ìš° -> ê²€ìƒ‰ ê²°ê³¼ ì—†ëŠ” ê²½ìš°ì˜ ë·° ë°˜í™˜
3. í‚¤ì›Œë“œë¡œ ê²€ìƒ‰ ì‹œ ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆëŠ” ê²½ìš° -> ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆëŠ” ê²½ìš°ì˜ ë·° ë°˜í™˜

ì—¬ê¸°ì„œ findBySearchKeywordëŠ” PostServiceì— ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ë˜ì–´ ìˆìœ¼ë©°,

**PostService**
```java
public List<JobPosting> findBySearchKeyword(String keyword) { return postRepository.findBySearchKeyword(keyword);}
```

PostRepositoryì— êµ¬í˜„ë˜ì–´ ìˆë‹¤.

**PostRepository**
```java
 @Query("SELECT p FROM JobPosting p " +
        "WHERE p.company.name LIKE %:keyword% " +
        "OR p.company.country LIKE %:keyword% " +
        "OR p.company.region LIKE %:keyword% " +
        "OR p.jobPosition LIKE %:keyword% " +
        "OR p.technologyUsed LIKE %:keyword%")
    List<JobPosting> findBySearchKeyword(String keyword);
```
ì¿¼ë¦¬ë¥¼ ì‚´í´ë³´ë©´ keywordë¥¼ í¬í•¨í•˜ê³  ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ëª¨ë“  í•„ë“œì—ì„œ ê²€ìƒ‰(í•´ì•¼ ë˜ëŠ”ë° ë¹ ì ¸ìˆë„¤?)

ë‹¤ì‹œ ìˆ˜ì •í•´ë³´ê² ë‹¤.

```java
@Query("SELECT p FROM JobPosting p " +
        "WHERE p.company.name LIKE %:keyword% " +
        "OR p.company.country LIKE %:keyword% " +
        "OR p.company.region LIKE %:keyword% " +
        "OR p.jobPosition LIKE %:keyword% " +
        "OR p.recruitmentDetails LIKE %:keyword% " +
        "OR p.technologyUsed LIKE %:keyword% " +
        "OR CAST(p.recruitmentCompensation AS string) LIKE %:keyword%")
```
ë¡œ í•´ê²° ì™„! ë§ˆê° ì‹œê°„ ì „ì— ê³ ì³ì„œ ì •ë§ ë‹¤í–‰ì´ê³ .. ì´ë˜ì„œ ê¸°ë¡ì´ ì¤‘ìš”í•˜êµ¬ë‚˜ ë‹¤ì‹œê¸ˆ ê¹¨ë‹«ìŠµë‹ˆë‹¤ìš”..

ê²€ìƒ‰ ê²°ê³¼ í¼ì€ ì½”ë“œëŠ” ìƒëµí•˜ê³  ì•„ë˜ì˜ ì‹¤í–‰ ì˜ˆì‹œì—ì„œ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.

[ì‹¤í–‰ ì˜ˆì‹œ]
![image](https://github.com/yeondori/yeondori.github.io/assets/93027942/779b233b-31da-45af-9e0f-55e88d187cdb)

ë“œë””ì–´ ëª¨ë“  ê¸°ëŠ¥ ì†Œê°œê°€ ëë‚¬ë‹¤!! 
ì›ë˜ëŠ” ê²Œì‹œê¸€ í•˜ë‚˜ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì •ë¦¬í•˜ë ¤ê³  í–ˆì§€ë§Œ ë„ˆë¬´ë‚˜ ìš•ì‹¬ì´ì—ˆê³ .. to be continued....